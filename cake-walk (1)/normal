I am working on a web app in VS Code that will be converted to Android APK using WebIntoApp.

I need to implement PUSH NOTIFICATIONS that work even when the app is CLOSED.

=== CURRENT PROJECT SETUP ===

PROJECT STRUCTURE:
[Paste your current folder structure here, or describe it like this:]
/my-app
  ├── index.html
  ├── style.css
  ├── app.js
  ├── service-worker.js (exists but incomplete)
  └── [other files]

DATABASE: Supabase
TABLE: reviews (users can add reviews)

CURRENT CODE ISSUE:
- Service Worker exists but has errors
- No push notification implementation
- Need notifications when new review is added
- Must work when app is CLOSED on Android (WebIntoApp APK)

=== WHAT I NEED YOU TO DO ===

1. ANALYZE my existing code structure
2. PROVIDE complete Service Worker code for push notifications
3. ADD notification permission request to my app
4. INTEGRATE with Supabase to trigger notification on new review
5. IMPLEMENT using OneSignal (easiest method) OR Firebase (if better)
6. ENSURE it works when app is closed
7. PROVIDE step-by-step setup instructions

=== PROVIDE COMPLETE CODE FOR ===

FILE 1: service-worker.js
- Complete working Service Worker
- Push notification handlers
- Background notification support
- Notification click handlers

FILE 2: Modified index.html
- OneSignal/FCM integration
- Notification permission request UI
- Required meta tags and scripts

FILE 3: Modified app.js (or main JavaScript file)
- Initialize notification service
- Request permissions
- Subscribe user to notifications
- Handle notification display

FILE 4: supabase-notifications.js (NEW FILE)
- Supabase realtime subscription for new reviews
- Trigger notification when new review added
- Background sync

FILE 5: Configuration instructions
- OneSignal/Firebase setup steps
- API keys and where to put them
- WebIntoApp settings needed

=== REQUIREMENTS ===

✓ Must work when app is completely closed
✓ Must work with WebIntoApp APK conversion
✓ Use simplest method (prefer OneSignal over Firebase)
✓ Complete, copy-paste ready code
✓ Clear comments explaining each section
✓ No broken/incomplete code
✓ Include error handling
✓ Test instructions included

=== MY EXISTING CODE ===

[PASTE YOUR KEY FILES BELOW]

--- index.html ---
[Paste your index.html content here]

--- app.js ---
[Paste your main JavaScript file here]

--- service-worker.js ---
[Paste your service-worker.js content here]

--- Supabase connection code ---
[Paste how you currently connect to Supabase and add reviews]

=== OUTPUT FORMAT ===

Provide each file with:
```filename: service-worker.js
[complete code]